<?xml version="1.0" encoding="UTF-8"?>

<OperationDefinition xmlns="http://hl7.org/fhir">
  <id value="diagnosticreport-append-retina-ai-result"/>
  <text>
    <status value="generated"/><div xmlns="http://www.w3.org/1999/xhtml"><p class="res-header-id"><b>Generated Narrative: OperationDefinition diagnosticreport-append-retina-ai-result</b></p><a name="diagnosticreport-append-retina-ai-result"> </a><a name="hcdiagnosticreport-append-retina-ai-result"> </a><p>URL: [base]/DiagnosticReport/[id]/$append-retina-ai-result</p><h3>Parameters</h3><table class="grid"><tr><td><b>Use</b></td><td><b>Name</b></td><td><b>Scope</b></td><td><b>Cardinality</b></td><td><b>Type</b></td><td><b>Binding</b></td><td><b>Documentation</b></td></tr><tr><td>IN</td><td>dme-right-eye</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/observation.html">Observation</a></td><td/><td><div><p>Diabetisk makulaødem høyre øye</p>
</div></td></tr><tr><td>IN</td><td>dr-right-eye</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/observation.html">Observation</a></td><td/><td><div><p>Diabetisk retinopati høyre øye</p>
</div></td></tr><tr><td>IN</td><td>dme-left-eye</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/observation.html">Observation</a></td><td/><td><div><p>Diabetisk makulaødem venstre øye</p>
</div></td></tr><tr><td>IN</td><td>dr-left-eye</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/observation.html">Observation</a></td><td/><td><div><p>Diabetisk retinopati venstre øye</p>
</div></td></tr><tr><td>IN</td><td>days-until-next-examination</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#string">string</a></td><td/><td><div><p>Number of days until next examination, stored in extension http://dips.no/fhir/StructureDefinition/frist-nesteundersokelse-extension</p>
</div></td></tr><tr><td>IN</td><td>ki-product-name</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#string">string</a></td><td/><td><div><p>Name of the AI product, stored in extension http://dips.no/fhir/StructureDefinition/ki-productname-extension</p>
</div></td></tr><tr><td>IN</td><td>ki-version-algorithm</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#string">string</a></td><td/><td><div><p>Version of the AI algorithm, stored in extension http://dips.no/fhir/StructureDefinition/ki-versjon-algoritme-extension</p>
</div></td></tr><tr><td>IN</td><td>ki-protocol</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#string">string</a></td><td/><td><div><p>Protocol of the AI analysis, stored in extension http://dips.no/fhir/StructureDefinition/ki-protokoll-extension</p>
</div></td></tr><tr><td>IN</td><td>effectiveTime</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#dateTime">dateTime</a></td><td/><td><div><p>Time when the AI analysis was performed</p>
</div></td></tr><tr><td>IN</td><td>full-ki-report</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#Attachment">Attachment</a></td><td/><td><div><p>Full report from the AI analysis, stored in presentedForm of the DiagnosticReport</p>
</div></td></tr><tr><td>IN</td><td>imageDescriptions</td><td/><td>1..*</td><td><a href="http://hl7.org/fhir/R4/imagingstudy.html">ImagingStudy</a></td><td/><td><div><p>Descriptions of the images, diagnosticreport.imagingStudy</p>
</div></td></tr><tr><td>IN</td><td>conclusionCode</td><td/><td>1..1</td><td><a href="http://hl7.org/fhir/R4/datatypes.html#CodeableConcept">CodeableConcept</a></td><td/><td><div><p>Conclusion code for the AI analysis, added to DiagnosticReport.conclusionCode</p>
</div></td></tr></table></div>
  </text>
  <url value="http://dips.no/fhir/OperationDefinition/append-retina-ai-result"/>
  <version value="0.1.1"/>
  <name value="append-retina-ai-result"/>
  <status value="active"/>
  <kind value="operation"/>
  <date value="2025-10-07T21:19:45+02:00"/>
  <publisher value="DIPS AS"/>
  <contact>
    <name value="DIPS AS"/>
    <telecom>
      <system value="url"/>
      <value value="http://dips.no/"/>
    </telecom>
    <telecom>
      <system value="email"/>
      <value value="teamsolsiden@dips.no"/>
    </telecom>
  </contact>
  <description value="OperationDefinition for appending retina AI reults to existing DiagnosticReport"/>
  <purpose value="Append results from AI analysis of retina images to a existing DiagnosticReport"/>
  <code value="append-retina-ai-result"/>
  <resource value="DiagnosticReport"/>
  <system value="false"/>
  <type value="false"/>
  <instance value="true"/>
  <parameter>
    <name value="dme-right-eye"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Diabetisk makulaødem høyre øye"/>
    <type value="Observation"/>
  </parameter>
  <parameter>
    <name value="dr-right-eye"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Diabetisk retinopati høyre øye"/>
    <type value="Observation"/>
  </parameter>
  <parameter>
    <name value="dme-left-eye"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Diabetisk makulaødem venstre øye"/>
    <type value="Observation"/>
  </parameter>
  <parameter>
    <name value="dr-left-eye"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Diabetisk retinopati venstre øye"/>
    <type value="Observation"/>
  </parameter>
  <parameter>
    <name value="days-until-next-examination"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Number of days until next examination, stored in extension http://dips.no/fhir/StructureDefinition/frist-nesteundersokelse-extension"/>
    <type value="string"/>
  </parameter>
  <parameter>
    <name value="ki-product-name"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Name of the AI product, stored in extension http://dips.no/fhir/StructureDefinition/ki-productname-extension"/>
    <type value="string"/>
  </parameter>
  <parameter>
    <name value="ki-version-algorithm"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Version of the AI algorithm, stored in extension http://dips.no/fhir/StructureDefinition/ki-versjon-algoritme-extension"/>
    <type value="string"/>
  </parameter>
  <parameter>
    <name value="ki-protocol"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Protocol of the AI analysis, stored in extension http://dips.no/fhir/StructureDefinition/ki-protokoll-extension"/>
    <type value="string"/>
  </parameter>
  <parameter>
    <name value="effectiveTime"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Time when the AI analysis was performed"/>
    <type value="dateTime"/>
  </parameter>
  <parameter>
    <name value="full-ki-report"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Full report from the AI analysis, stored in presentedForm of the DiagnosticReport"/>
    <type value="Attachment"/>
  </parameter>
  <parameter>
    <name value="imageDescriptions"/>
    <use value="in"/>
    <min value="1"/>
    <max value="*"/>
    <documentation value="Descriptions of the images, diagnosticreport.imagingStudy"/>
    <type value="ImagingStudy"/>
  </parameter>
  <parameter>
    <name value="conclusionCode"/>
    <use value="in"/>
    <min value="1"/>
    <max value="1"/>
    <documentation value="Conclusion code for the AI analysis, added to DiagnosticReport.conclusionCode"/>
    <type value="CodeableConcept"/>
  </parameter>
</OperationDefinition>